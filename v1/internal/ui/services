[
  ${
    range(
      env(
        'CONSUL_SERVICE_COUNT',
        Math.floor(
          (
            Math.random() * env('CONSUL_SERVICE_MAX', 10)
          ) + parseInt(env('CONSUL_SERVICE_MIN', 1))
        )
      )
    ).map(
      function(item, i)
      {
        return `
          {
            "Name":"service-${i}",
            "Tags": [
                ${
                    range(env('CONSUL_TAG_COUNT', Math.floor(Math.random() * 5) + 1)).map(
                        function(item, i)
                        {
                            return `"${fake.hacker.noun()}"`;
                        }
                    )
                }
            ],
            "Kind": "${fake.helpers.randomize(['consul', 'connect-proxy'])}",
${ fake.random.number({min: 1, max: 10}) > 2 ? `
            "Meta": {
              "external-source": "${fake.helpers.randomize(['consul', 'nomad', 'terraform', 'kubernetes', ''])}"
            },
` : `` }
            "Nodes":[
              ${
                range(env('CONSUL_NODE_COUNT', 100)).map(
                  function(item, i)
                  {
                    return `
                      {
                        "ID":"7037e928-d9e8-3b58-4712-6f5ded209002",
                        "Node":"node-${$i}",
                        "Services": [
                          {
                            "ID": "service-id",
                            "Service":"service-name",
                            "Meta": {
                              "external-source": "${fake.helpers.randomize(['consul', 'nomad', 'terraform', 'kubernetes', ''])}"
                            }
                          }
                        ]
                      }
                    `;
                  }
                )
              }
            ],
            "ChecksPassing":${fake.random.number({min: 1, max: env('CONSUL_CHECK_COUNT', fake.random.number(10))})},
            "ChecksWarning":${fake.random.number({min: 0, max: env('CONSUL_CHECK_COUNT', fake.random.number(10))})},
            "ChecksCritical":${fake.random.number({min: 0, max: env('CONSUL_CHECK_COUNT', fake.random.number(10))})}
          }
        `;
      }
    )
  }
]
