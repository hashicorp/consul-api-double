[
  ${
    range(env('CONSUL_NODE_COUNT', 100)).map(
      function(item, i)
      {
        return `
          {
            "ID":"${fake.random.uuid()}",
            "Node":"node-${i}",
            "Address":"${fake.internet.ip()}",
            "TaggedAddresses":{
              "lan":"${fake.internet.ip()}",
              "wan":"${fake.internet.ip()}"
            },
            "Meta": {
              "consul-network-segment":""
            },
            "Services":[
            ${
              range(fake.random.number(4) + 1).map(
                function(item, i) {
                  const service = `service-${i}`;
                  return `
                    {
                      "ID":"${service}",
                      "Service":"${service}",
                      "Tags":null,
                      "Address":"",
                      "Port":8300,
                      "EnableTagOverride":false,
                      "CreateIndex":5,
                      "ModifyIndex":5
                    }
                  `;
                }
              )
            }
            ],
            "Checks":[
            ${
                range(env('CONSUL_CHECK_COUNT', 3)).map(
                    function()
                    {
                        return `
                            {
                                "Node":"node-${i}",
                                "CheckID":"${fake.hacker.noun()}Health",
                                "Name":"${fake.hacker.noun()} Status",
                                "Status":"${i > 7 ? "passing" : fake.helpers.randomize(['warning', 'critical'])}",
                                "Notes":"Notes in here",
                                "Output":"${i > 7 ? "happy" : fake.helpers.randomize(['not in a good way', 'not happy'])}",
                                "ServiceID":"",
                                "ServiceName":"",
                                "ServiceTags":["Tag"],
                                "Definition":{},
                                "CreateIndex":5,
                                "ModifyIndex":5
                            }
                        `;

                    }
                )
            }
            ]
          }
        `;
      }
    )
  }
]
